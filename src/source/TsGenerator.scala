package djinni

import java.io._
import djinni.ast.Record.DerivingType
import djinni.ast._
import djinni.generatorTools._
import djinni.meta._
import djinni.writer.IndentWriter

class TsGenerator(spec: Spec) extends Generator(spec) {
  private def writeTsFile(folder: File, moduleName: String)(name: String, origin: String, imports: Iterable[String], f: IndentWriter => Unit) {
    createFile(folder, idJs.ty(name) + ".ts", (w: IndentWriter) => {
      w.wl("// AUTOGENERATED FILE - DO NOT MODIFY!")
      w.wl("// This file generated by Djinni from " + origin)
      f(w)
    })
  }
  //--------------------------------------------------------------------------
  override def generateEnum(origin: String, ident: Ident, doc: Doc, e: Enum) {
    writeTsFile(spec.tsOutFolder.get, "modulename")(ident.name, origin, Nil, (w=> {
    }))
  }
  override def generateInterface(origin: String, ident: Ident, doc: Doc, typeParams: Seq[TypeParam], i: Interface) {
    writeTsFile(spec.tsOutFolder.get, "modulename")(ident.name, origin, Nil, (w=> {
    }))
  }
  override def generateRecord(origin: String, ident: Ident, doc: Doc, params: Seq[TypeParam], r: Record) {
    writeTsFile(spec.tsOutFolder.get, "modulename")(ident.name, origin, Nil, (w=> {
    }))
  }
}
