<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>WASM Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="demo_cpp.js"></script>
  </head>
  <body>
    <h1>WASM Demo</h1>
    <p>
    <textarea id="txt" cols="40" rows="5">item1
item3
item5
item2
item4</textarea>
    </p>
    <script>
      var m;
      class SortListener {
          update(itemList) {
              document.getElementById('txt').value = itemList.items.join('\n')
          }
      }
      client().then(module => {
          m = module;
          sorter = module.SortItems.createWithListener(new SortListener())
      });
      function sort(order) {
          var lines = document.getElementById('txt').value.split('\n');
          var itemList = {
              items: lines
          };
          sorter.sort(order, itemList);
      }
      function onSortAsc() {
          sort(m.SortOrder.ASCENDING)
      }
      function onSortDesc() {
          sort(m.SortOrder.DESCENDING)
      }
      function onSortRandom() {
          sort(m.SortOrder.RANDOM)
      }
    </script>
    <button onclick="onSortAsc()">Sort Asc</button> 
    <button onclick="onSortDesc()">Sort Desc</button> 
    <button onclick="onSortRandom()">Sort Random</button> 
  </body>
</html>
